<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="../bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="../select2/select2.css">
    <link rel="stylesheet" href="../select2/select2-metro.css">
    <!--<link rel="stylesheet" href="../select2/select2-bootstrap.css">-->
    <link rel="stylesheet" href="../select2-bootstrap-theme/dist/select2-bootstrap.min.css">
    <script src="../jquery.min.js"></script>
    <script src="../bootstrap/js/bootstrap.min.js"></script>
    <script src="../select2/select2.js"></script>
    <script src="city.js"></script>
    <script>
        //加载select列表项
        function loadOptions(selector,items){
            var select=$(selector);
            var optionHtml='<option value="default" selected="selected">请选择</option>';
            select.empty(); 
            $.each(items,function(idx,value){
                optionHtml+='<option value="'+value.id+'">'+value.text+'</option>'
            });
            $(optionHtml).appendTo(select);
        }
        //加载区县
        function loadCounties(){
             //清空当前
            $("#county").empty(); 
             $("#district").empty(); 
            var city=$('#city').val();
            var county=$.grep(counties,function(item,index){
                return item.cityid==city;
            });
            loadOptions('#county',county);
        }
        //加载街道
        function loadDistricts(){
            //清空当前
            $("#district").empty(); 
            var county=$('#county').val();
            var district=$.grep(districts,function(item,index){
                return item.countyid==county;
            });
            loadOptions('#district',district);
        }
        //重新加载内嵌页面
        function reloadIFrame(){
            alert($('#district').val());
        }
        //加载
        $(function(){
            loadOptions('#city',cities);
            $('#city').val('jinan');
            loadCounties();
            
            $('#select2').select2({
                // theme:'bootstrap'
            });
        });
    </script>
</head>

<body>
    <div class="container form-inline" style="margin-top:200px;">
        <select class="form-control" id='city' style="width:100px;" onchange="loadCounties()"></select>
        <select class="form-control" id='county' style="width:100px;" onchange="loadDistricts()"></select>
        <select class="form-control" id='district' style="width:140px;" onchange="reloadIFrame()"></select>
    </div>
    <div class="container" style="margin-top:40px;">
        <select name="select2" id="select2"  style="width:200px;" class="select2 select2-container" >
            <option value="1">option1</option>
            <option value="2">option2</option>
        </select>
    </div>
</body>

</html>